(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["write-video"],{"0b59":function(t,e,i){"use strict";var s=i("6550"),a=i.n(s);a.a},6240:function(t,e,i){"use strict";var s=i("b4ff"),a=i.n(s);a.a},6550:function(t,e,i){},b4ff:function(t,e,i){},dfae:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pb20 pt20 pl20 pr20"},[i("div",{staticClass:"box pr"},[i("div",{ref:"tip-box",staticClass:"tip-box"},[i("div",{staticClass:"tip-btn btn-warning",on:{click:t.showDrawerInfo}},[i("div",[t._v("点")]),i("div",[t._v("击")]),i("div",[t._v("预")]),i("div",[t._v("览")])]),i("div",{staticClass:"tip-btn btn-primary mt10",on:{click:function(e){return t.remindDialog({type:"reset",text:"此操作将清空当前数据, 是否继续?"})}}},[i("div",[t._v("新")]),i("div",[t._v("增")]),i("div",[t._v("视")]),i("div",[t._v("频")])])]),i("div",[i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("视频标题：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.videoTitle,callback:function(e){t.$set(t.info,"videoTitle",e)},expression:"info.videoTitle"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("封面图片：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("div",{staticClass:"pub-flex1"},[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.videoImage,callback:function(e){t.$set(t.info,"videoImage",e)},expression:"info.videoImage"}})],1),i("div",{staticClass:"pub-flex",staticStyle:{width:"130px","justify-content":"flex-end"}},[i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.$Bus.$emit("changePickerCover",{showState:!0})}}},[t._v("从资源库中选取")])],1)])])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("开启轮播图：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},model:{value:t.info.openSwiper,callback:function(e){t.$set(t.info,"openSwiper",e)},expression:"info.openSwiper"}}),i("p",{staticClass:"pl20",staticStyle:{color:"#F56C6C"}},[t._v("开启后，需要上传轮播图，请注意！")])],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("选择轮播图：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("div",{staticClass:"pub-flex1"},[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.poster,callback:function(e){t.$set(t.info,"poster",e)},expression:"info.poster"}})],1),i("div",{staticClass:"pub-flex",staticStyle:{width:"130px","justify-content":"flex-end"}},[i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.$Bus.$emit("changePickerPoster",{showState:!0})}}},[t._v("从资源库中选取")])],1)])])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("导演：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"英文逗号隔开,"},model:{value:t.info.director,callback:function(e){t.$set(t.info,"director",e)},expression:"info.director"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("主演：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"英文逗号隔开,"},model:{value:t.info.performer,callback:function(e){t.$set(t.info,"performer",e)},expression:"info.performer"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("类型：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:t.info.video_type,callback:function(e){t.$set(t.info,"video_type",e)},expression:"info.video_type"}},t._l(t.restaurants,(function(t){return i("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("评分：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex",staticStyle:{height:"32px","justify-content":"flex-start"}},[i("el-rate",{attrs:{max:10,"allow-half":!1,"show-text":!1},model:{value:t.info.video_rate,callback:function(e){t.$set(t.info,"video_rate",e)},expression:"info.video_rate"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("语言：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.language,callback:function(e){t.$set(t.info,"language",e)},expression:"info.language"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("发行地区：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.sub_region,callback:function(e){t.$set(t.info,"sub_region",e)},expression:"info.sub_region"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("发行时间：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.rel_time,callback:function(e){t.$set(t.info,"rel_time",e)},expression:"info.rel_time"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("更新时间：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-date-picker",{attrs:{size:"small","value-format":"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期时间"},model:{value:t.info.update_time,callback:function(e){t.$set(t.info,"update_time",e)},expression:"info.update_time"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("影片介绍：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:t.info.introduce,callback:function(e){t.$set(t.info,"introduce",e)},expression:"info.introduce"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("更新状态：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.remind_tip,callback:function(e){t.$set(t.info,"remind_tip",e)},expression:"info.remind_tip"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("关联新闻：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("div",{staticClass:"pub-flex1"},[i("el-input",{attrs:{size:"small",placeholder:"多条新闻中间用英文逗号(,)隔开"},model:{value:t.info.news_id,callback:function(e){t.$set(t.info,"news_id",e)},expression:"info.news_id"}})],1),i("div",{staticClass:"pub-flex",staticStyle:{width:"130px","justify-content":"flex-end"}},[i("el-popover",{attrs:{placement:"bottom-end",title:"选择新闻",width:"600",trigger:"click"},on:{show:function(e){return t.$Bus.$emit("showArticlePopover")}}},[i("popover-article"),i("el-button",{attrs:{slot:"reference",size:"small",type:"success"},slot:"reference"},[t._v("从资源库中选取")])],1)],1)])])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("是否置顶：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},model:{value:t.info.popular,callback:function(e){t.$set(t.info,"popular",e)},expression:"info.popular"}}),i("p",{staticClass:"pl20",staticStyle:{color:"#F56C6C"}},[t._v("置顶视频后视频排序会靠前，请注意！")])],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("允许留言：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},model:{value:t.info.allow_reply,callback:function(e){t.$set(t.info,"allow_reply",e)},expression:"info.allow_reply"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("是否显示：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},model:{value:t.info.display,callback:function(e){t.$set(t.info,"display",e)},expression:"info.display"}}),i("p",{staticClass:"pl20",staticStyle:{color:"#F56C6C"}},[t._v("默认新建视频显示状态，请注意！")])],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("播放源是否排序：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},model:{value:t.info.scource_sort,callback:function(e){t.$set(t.info,"scource_sort",e)},expression:"info.scource_sort"}}),i("p",{staticClass:"pl20",staticStyle:{color:"#F56C6C"}},[t._v("默认走系统排序，请注意！")])],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("播放源：")]),i("div",{staticClass:"row-con"},[i("div",[i("div",{staticClass:"pub-flex"},[i("div",{staticStyle:{width:"140px"}},[i("el-select",{staticClass:"pr20",attrs:{size:"small",placeholder:"请选择"},model:{value:t.curSourceType,callback:function(e){t.curSourceType=e},expression:"curSourceType"}},t._l([{k:"内置播放器",v:"player"},{k:"外链播放器",v:"iframe"}],(function(t){return i("el-option",{key:t.v,attrs:{label:t.k,value:t.v}})})),1)],1),i("div",{staticClass:"pr20 pub-flex",staticStyle:{width:"200px"}},[i("span",{staticClass:"row-label"},[t._v("源名称：")]),i("div",{staticClass:"pub-flex1"},[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},on:{change:t.addOneSource},model:{value:t.curSourceName,callback:function(e){t.curSourceName=e},expression:"curSourceName"}})],1)]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addOneSource}},[t._v("新增一组源")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.source.length,expression:"source.length"}],staticClass:"pub-flex pub-flex1",staticStyle:{"justify-content":"flex-end"}},[i("span",{staticClass:"row-label",staticStyle:{width:"90px"}},[t._v("移动当前源：")]),i("el-button-group",[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.moveCurSourcePos("left")}}},[i("i",{staticClass:"fa fa-arrow-left",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),i("span",[t._v("向左移动")])]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.moveCurSourcePos("right")}}},[i("span",[t._v("向右移动")]),i("i",{staticClass:"fa fa-arrow-right",staticStyle:{"margin-left":"5px"},attrs:{"aria-hidden":"true"}})])],1)],1)],1),i("div",{staticClass:"tabs mt20"},[i("div",{staticClass:"bar pub-flex"},t._l(t.source,(function(e,s){return i("div",{class:t.curTabIndex===s?"active":"",on:{click:function(e){t.curTabIndex=s}}},[t._v(" "+t._s(e.name)+" "),i("i",{staticClass:"el-icon-close ml10",on:{click:function(e){return e.stopPropagation(),t.removeCurSource(s,e)}}})])})),0),i("div",{staticClass:"pr20 pl20",staticStyle:{border:"1px solid #ddd","border-radius":"4px"}},[i("div",{staticClass:"address pub-flex pt20"},[i("div",{staticClass:"pr20 pub-flex",staticStyle:{width:"200px"}},[i("span",{staticClass:"row-label"},[t._v("名称：")]),i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.target.name,callback:function(e){t.$set(t.target,"name",e)},expression:"target.name"}})],1),i("div",{staticClass:"pub-flex1 pub-flex pr20"},[i("span",{staticClass:"row-label"},[t._v("地址：")]),i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.target.value,callback:function(e){t.$set(t.target,"value",e)},expression:"target.value"}})],1),i("div",[i("el-button",{attrs:{size:"small",type:"success"},on:{click:t.curListAddItem}},[t._v("确定")])],1),i("div",{staticClass:"pl20"},[i("el-button",{attrs:{type:"warning",size:"small"},on:{click:t.showSourceEditDialog}},[t._v("批量添加")])],1)]),i("div",{staticClass:"mt20",staticStyle:{height:"400px","overflow-y":"auto"}},t._l(t.source,(function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.curTabIndex===s,expression:"curTabIndex === index1"}],key:e.z_name},[e.list.length?i("div",t._l(e.list,(function(e,a){return i("div",{staticClass:"pub-flex source-item"},[i("i",{staticClass:"el-icon-close ml20 pointer",on:{click:function(e){return t.removeCurItem(s,a)}}}),i("div",{staticClass:"pl20"},[i("span",[t._v("名称：")]),i("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(e.split("$")[0]))])]),i("div",{staticClass:"pl20"},[i("span",[t._v("地址：")]),i("span",{staticStyle:{color:"#F56C6C"}},[t._v(t._s(e.split("$")[1]))])])])})),0):i("div",{staticClass:"text-center pt20 pb20"},[i("p",[t._v("暂无源")])])])})),0)])])])])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("提交选择：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[t.isEdit?i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.remindDialog({type:"edit",text:"此操作将更新一条数据, 是否继续?"})}}},[t._v("确认更新")]):i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.remindDialog({type:"add",text:"此操作将添加一条数据, 是否继续?"})}}},[t._v("确认添加")])],1)])])])]),i("drawer-cover",{on:{select:t.setDataValue}}),i("drawer-poster",{on:{select:t.setDataValue}}),i("drawer-info"),i("dialog-player"),i("dialog-source",{on:{select:t.deliveryResult}})],1)},a=[],l=(i("b4fb"),i("9302"),i("ea69"),i("053b"),i("e18c"),i("e35a"),i("5e9f"),i("0d7a"),i("6db4"),i("af86"),i("b9a9")),o=i("8d71"),r=i("4d50"),n=i("94ff"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-edit-cource",attrs:{time:"1578144601505"}},[i("el-dialog",{attrs:{title:"批量添加播放源",visible:t.showState,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.showState=e}}},[i("div",{staticClass:"pb20"},[i("p",{staticStyle:{color:"#F56C6C"}},[t._v("注意：例如 HD高清$http://xxx.xxx.com/xxx/xxx/xxx/xxx/xxx.m3u8")]),i("p",{staticStyle:{color:"#F56C6C"}},[t._v("注意：多行回车换行，标题和url中间使用 "),i("span",{staticStyle:{color:"#409EFF"}},[t._v("$")]),t._v(" 隔开")])]),i("div",{},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:15,maxRows:15},placeholder:"请输入内容"},model:{value:t.sourceVal,callback:function(e){t.sourceVal=e},expression:"sourceVal"}})],1),i("div",{staticClass:"pt20 text-right"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.createList}},[t._v("确定")])],1)])],1)},u=[],d=(i("dbb3"),{data:function(){return{showState:!1,sourceVal:"",curSource:[]}},methods:{createList:function(){var t=this,e=this.sourceVal.split("\n").filter((function(t){return t&&t.trim()}));e.length?this.$confirm("您输入了 ".concat(e.length," 条记录，是否确认？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$emit("select",e),t.showState=!1})).catch((function(){})):this.$message({type:"warning",message:"您没有输入任何记录！"})}},watch:{showState:function(t,e){t||(this.sourceVal="",this.curSource=[])}},created:function(){var t=this;this.$Bus.$off("changeEditSource"),this.$Bus.$on("changeEditSource",(function(e){t.showState=e}))}}),f=d,p=(i("6240"),i("9ca4")),v=Object(p["a"])(f,c,u,!1,null,"57c819dc",null),h=v.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{staticClass:"text-center"},[i("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"请输入内容"},on:{change:t.pullData},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[i("el-button",{staticClass:"pointer",attrs:{slot:"prepend",icon:"el-icon-refresh"},on:{click:t.pullData},slot:"prepend"}),i("el-button",{staticClass:"pointer",attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.pullData},slot:"append"})],1)],1),i("div",{staticClass:"mt10"},[i("el-table",{attrs:{border:"",height:300,data:t.tableData}},[i("el-table-column",{attrs:{property:"articleTitle",label:"文章名称"}}),i("el-table-column",{attrs:{width:"220",property:"_id",label:"文章ID"}})],1)],1),i("div",{staticClass:"text-center ov-x-a mt10"},[i("el-pagination",{staticClass:"pr20",attrs:{background:"","current-page":t.curPageNum,"page-sizes":[15,30,60,100],"page-size":t.curPageLen,layout:"total, prev, pager, next",total:t.pageTotal},on:{"current-change":t.pullNewPageData}})],1)])},b=[],g=(i("9cf3"),i("2423")),x={data:function(){return{searchVal:"",loading:!1,tableData:[],pageTotal:0,curPageNum:1,curPageLen:15}},methods:{pullNewPageData:function(t){this.curPageNum=t,this.pullData({loading:!1,msgTip:!1})},pullData:function(){var t=this;this.loading=!0;var e={page:this.curPageNum,limit:this.curPageLen};this.searchVal&&(e.search=this.searchVal),Object(g["c"])(e).then((function(e){if(t.ajaxMsgTips(e),200===e.data.code){var i=e.data.value;t.tableData=i.result,t.pageTotal=i.total}})).finally((function(){t.loading=!1}))}},created:function(){this.$Bus.$off("showArticlePopover"),this.$Bus.$on("showArticlePopover",this.pullData)}},_=x,w=Object(p["a"])(_,m,b,!1,null,"6a82605c",null),C=w.exports,y=i("c24f7"),S=i("71b7"),$=i("cc69"),T=i("093a"),k={components:{DrawerCover:r["a"],DrawerPoster:n["a"],DrawerInfo:y["a"],PopoverArticle:C,DialogPlayer:S["a"],DialogSource:h},data:function(){return{isEdit:!1,_id:"",infos:{videoTitle:"",director:"",performer:"",video_type:"",video_rate:0,language:"",sub_region:"",rel_time:"",introduce:"",remind_tip:"",news_id:"",videoImage:"",video_tags:"",update_time:"",poster:"",popular:!1,allow_reply:!1,openSwiper:!1,display:!0,scource_sort:!1},info:{},source:[],target:{name:"",value:""},curSourceName:"",curSourceType:"player",curTabIndex:0,restaurants:[]}},methods:{showSourceEditDialog:function(){this.source.length?this.$Bus.$emit("changeEditSource",!0):this.$message({type:"warning",message:"没有播放源可供添加，请先添加一组播放源！",duration:1e3})},deliveryResult:function(t){this.source[this.curTabIndex].list=this.source[this.curTabIndex].list.concat(t)},showDrawerInfo:function(){var t=this.createInfoData({getType:!0});t&&this.$Bus.$emit("changeVideoDrawerState",{showState:!0,is_pull:!1,data:t})},remindDialog:function(t){var e=this;this.$confirm(t.text,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"add"===t.type?e.insertVideoInfo():"edit"===t.type?e.updateVideoInfo():"reset"===t.type&&e.$router.push({path:"/main/write-video",query:{time:(new Date).getTime()}})})).catch((function(){}))},searchTypeVal:function(){var t,e=this.info.video_type,i=Object(o["a"])(this.restaurants);try{for(i.s();!(t=i.n()).done;){var s=t.value;if(s._id===e)return s.name.replace("┣━━━━━","")}}catch(a){i.e(a)}finally{i.f()}},createInfoData:function(t){var e=t.getType,i=void 0!==e&&e;if(this.info.videoTitle.trim())if(this.info.videoImage.trim()){if(this.info.video_type.trim()&&24===this.info.video_type.length){var s,a={videoTitle:this.info.videoTitle.trim(),director:this.info.director.trim(),videoImage:this.info.videoImage.trim(),poster:this.info.poster.trim(),video_tags:this.info.video_tags.trim()?this.info.video_tags.trim().split(","):[],performer:this.info.performer.trim(),video_type:i?this.searchTypeVal():this.info.video_type.trim(),video_rate:this.info.video_rate,update_time:this.info.update_time,language:this.info.language.trim(),sub_region:this.info.sub_region.trim(),rel_time:this.info.rel_time.trim(),introduce:this.info.introduce.trim(),remind_tip:this.info.remind_tip.trim(),news_id:this.info.news_id.trim()?this.info.news_id.trim().split(","):[],popular:this.info.popular,allow_reply:this.info.allow_reply,openSwiper:this.info.openSwiper,display:this.info.display,scource_sort:this.info.scource_sort},l=this.source,r=[],n=Object(o["a"])(l);try{for(n.s();!(s=n.n()).done;){var c=s.value,u=Object.assign({},c);u.list=u.list.join("#"),r.push(u)}}catch(d){n.e(d)}finally{n.f()}return{info:a,source:r}}this.$message({type:"warning",message:"视频分类必填！",duration:1e3})}else this.$message({type:"warning",message:"封面图片必填！",duration:1e3});else this.$message({type:"warning",message:"视频标题必填！",duration:1e3})},updateVideoInfo:function(){var t=this,e=this.createInfoData({getType:!1});e&&(e["_id"]=this._id,Object(T["l"])(e).then((function(e){t.ajaxMsgTips(e),setTimeout((function(){t.$router.push({path:"/main/video"})}),500)})))},insertVideoInfo:function(){var t=this,e=this.createInfoData({getType:!1});e&&Object(T["b"])(e).then((function(e){t.ajaxMsgTips(e),setTimeout((function(){t.$router.push({path:"/main/video"})}),500)}))},setDataValue:function(t,e){this.info[e]=t},resetSourceItemIndex:function(){var t,e=Object(o["a"])(this.source.entries());try{for(e.s();!(t=e.n()).done;){var i=Object(l["a"])(t.value,2),s=i[0],a=i[1];a["index"]=s}}catch(r){e.e(r)}finally{e.f()}},moveCurSourcePos:function(t){if("left"===t){if(0===this.curTabIndex)return;var e=this.source[this.curTabIndex-1],i=this.source[this.curTabIndex];return this.$set(this.source,this.curTabIndex-1,i),this.$set(this.source,this.curTabIndex,e),this.curTabIndex--,void this.resetSourceItemIndex()}if("right"===t){if(this.curTabIndex===this.source.length-1)return;var s=this.source[this.curTabIndex+1],a=this.source[this.curTabIndex];this.$set(this.source,this.curTabIndex+1,a),this.$set(this.source,this.curTabIndex,s),this.curTabIndex++,this.resetSourceItemIndex()}},removeCurSource:function(t){this.source.splice(t,1)},curListAddItem:function(){this.source.length?this.target.name?this.target.value?(this.source[this.curTabIndex].list.push("".concat(this.target.name,"$").concat(this.target.value)),this.target={name:"",value:""}):this.$message({type:"warning",message:"请输入链接",duration:1e3}):this.$message({type:"warning",message:"请输入名称",duration:1e3}):this.$message({type:"warning",message:"请先添加一组源",duration:1e3})},addOneSource:function(){this.curSourceName?(this.source.push({index:this.source.length,name:this.curSourceName,z_name:(new Date).getTime()+"",type:this.curSourceType,list:[]}),this.curSourceName=""):this.$message({type:"warning",message:"请输入源名称",duration:1e3})},removeCurItem:function(t,e){this.source[t].list.splice(e,1)},pullAllTypes:function(){var t=this;Object($["b"])({},{loading:!0}).then((function(e){if(200===e.data.code){var i,s=[],a=Object(o["a"])(e.data.value);try{for(a.s();!(i=a.n()).done;){var l=i.value;if(s.push({name:l.name,_id:l._id}),l.children&&l.children.length){var r,n=Object(o["a"])(l.children);try{for(n.s();!(r=n.n()).done;){var c=r.value;s.push({name:"┣━━━━━"+c.name,_id:c._id})}}catch(u){n.e(u)}finally{n.f()}}}}catch(u){a.e(u)}finally{a.f()}t.restaurants=s}}))},pullCurVideoInfo:function(t){var e=this;Object(T["f"])({_id:t}).then((function(t){if(200===t.data.code&&t.data.value.length){var i,s=t.data.value[0],a=s.video_tags.join(","),l=Object(o["a"])(s.source);try{for(l.s();!(i=l.n()).done;){var r=i.value;r.list=r.list.split("#")}}catch(n){l.e(n)}finally{l.f()}s.news_id=s.news_id.join(","),e.source=s.source,e.info=Object.assign({},s,{video_tags:a})}})).catch((function(t){e.isEdit=!1,e.info=Object.assign({},e.infos)}))},setTipBtnStyle:function(t){var e=this.$refs["tip-box"],i=0;t&&(i=t.target.scrollTop),e&&e.style&&(e.style.top=document.body.clientHeight/2+i-45+"px")},initEvent:function(){var t=document.getElementsByClassName("cpt-con")[0];this.setTipBtnStyle(),t.onscroll=this.setTipBtnStyle},initSetting:function(){var t=this.$route.query._id;this.isEdit=!(!t||24!==t.length),this._id=this.isEdit?t:"",this.isEdit?this.pullCurVideoInfo(t):(this.info=Object.assign({},this.infos),this.source=[]),this.pullAllTypes()}},created:function(){this.initSetting()},watch:{$route:function(t,e){this.initSetting()}},mounted:function(){this.$nextTick(this.initEvent)},beforeDestroy:function(){var t=document.getElementsByClassName("cpt-con")[0];t.onresize=null}},I=k,D=(i("0b59"),Object(p["a"])(I,s,a,!1,null,"3c40b594",null));e["default"]=D.exports},ea69:function(t,e,i){"use strict";var s=i("1c8b"),a=i("e1d6"),l=i("3da3"),o=i("d88d"),r=i("3553"),n=i("1ca1"),c=i("1bbd"),u=i("1ea7"),d=i("ff9c"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,h=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var i,s,u,d,f,p,g=r(this),x=o(g.length),_=a(t,x),w=arguments.length;if(0===w?i=s=0:1===w?(i=0,s=x-_):(i=w-2,s=h(v(l(e),0),x-_)),x+i-s>m)throw TypeError(b);for(u=n(g,s),d=0;d<s;d++)f=_+d,f in g&&c(u,d,g[f]);if(u.length=s,i<s){for(d=_;d<x-s;d++)f=d+s,p=d+i,f in g?g[p]=g[f]:delete g[p];for(d=x;d>x-s+i;d--)delete g[d-1]}else if(i>s)for(d=x-s;d>_;d--)f=d+s-1,p=d+i-1,f in g?g[p]=g[f]:delete g[p];for(d=0;d<i;d++)g[d+_]=arguments[d+2];return g.length=x-s+i,u}})}}]);